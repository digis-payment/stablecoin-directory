<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stable Coins List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
      integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body class="font-sans bg-gray-800 text-white">
    <header class="text-center p-6">
      <h1 class="text-3xl font-bold mb-2">Stablecoin Directory</h1>
      <p class="text-xl">
        Comprehensive List of Stablecoins and Their Blockchain Addresse
      </p>
    </header>

    <main class="container mx-auto p-4">
      <coin-list class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <!-- Coin items will be populated here -->
      </coin-list>
    </main>

    <footer class="text-center p-4 mt-6 border-t border-gray-700">
      <p>&copy; 2024 Stablecoin Directory by <a href="https://digis.io">Digis SÃ rl</a> All rights reserved.</p>
      <a href="https://github.com/digis-payment/stablecoin-directory" target="_blank" class="text-white hover:text-gray-300">
        <i class="fab fa-github"></i> View on GitHub
      </a>
    </footer>


    <script>
      function formatAddress(address, length = 10) {
        if (address && address.length > 10) {
          return `${address.substring(0, length / 2)}...${address.substring(
            address.length - 4
          )}`;
        }
        return address;
      }

      function toLink(address, protocol) {
        switch (protocol.toLowerCase()) {
          case "ethereum":
            return `https://etherscan.io/token/${address}`;
          case "arbitrum":
            return `https://arbiscan.io/token/${address}`;
          case "optimism":
            return `https://optimistic.etherscan.io/token/${address}`;
          case "solana":
            return `https://solscan.io/account/${address}`;
          case "avalanche":
            return `https://snowtrace.io/address/${address}`;
          case "bsc":
            return `https://bscscan.com/token/${address}`;
          case "polygon":
            return `https://polygonscan.com/token/${address}`;
          default:
            return "#";
        }
      }

      class CoinItem extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: "open" });
        }

        set coin(coin) {
          const template = document.createElement("template");
          template.innerHTML = `
            <style>
                .coin-item {
                    background-color: #1e293b; /* Dark background */
                    padding: 15px;
                    border-radius: 10px;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                    color: #ffffff;
                    margin-bottom: 10px;
                }
                .coin-item h2 {
                    margin: 0 0 10px 0;
                    color: #3b82f6; /* Light blue for the title */
                }
                a {
                    color: #f59e0b; /* Orange link */
                    text-decoration: none;
                }
                .addresses {
                    margin-top: 10px;
                }
                .address {
                    background-color: #334155; /* Slightly lighter background for addresses */
                    padding: 5px;
                    border-radius: 5px;
                    margin-bottom: 5px;
                }
            </style>
            <div class="coin-item">
                <h2>${coin.name} (${coin.symbol})</h2>
                <a href="${coin.website}" target="_blank">Website</a>
                <div class="addresses">
                    ${Object.entries(coin.addresses)
                      .map(
                        ([protocol, address]) => `
                        <div class="address">${protocol.toUpperCase()}: <a target="_blank" href="${toLink(
                          address,
                          protocol
                        )}""><code>${formatAddress(address)}</code></a>
                       
                        </div>
                    `
                      )
                      .join("")}
                </div>
            </div>
        `;

          this.shadowRoot.appendChild(template.content.cloneNode(true));
        }
      }

      customElements.define("coin-item", CoinItem);

      class CoinList extends HTMLElement {
        constructor() {
          super();
          this.attachShadow({ mode: "open" });
        }

        set coins(coins) {
          Object.entries(coins).forEach(([symbol, coin]) => {
            const coinItem = document.createElement("coin-item");
            coinItem.coin = { ...coin, symbol };
            this.shadowRoot.appendChild(coinItem);
          });
        }
      }

      customElements.define("coin-list", CoinList);

      async function loadStableCoins() {
        try {
          const response = await fetch("./stablecoins.json");
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const stableCoins = await response.json();

          const coinListElement = document.querySelector("coin-list");
          coinListElement.coins = stableCoins;
        } catch (error) {
          console.error("Could not load stablecoins:", error);
        }
      }

      loadStableCoins();
    </script>
  </body>
</html>
